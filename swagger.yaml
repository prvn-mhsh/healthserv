openapi: 3.0.0
info:
  title: Misc Service - Articles API
  version: 1.0.0
  description: Articles module for doctors, admins, and patients

servers:
  - url: http://localhost:3000

security:
  - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    Article:
      type: object
      properties:
        id:
          type: integer
        title:
          type: string
        summary:
          type: string
        content:
          type: string
        tags:
          type: array
          items:
            type: string
        status:
          type: string
          enum: [DRAFT, PENDING_APPROVAL, PUBLISHED, REJECTED, DELISTED]

paths:

  /doctor/articles:
    post:
      summary: Create article draft
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Article'
      responses:
        201:
          description: Created

  /doctor/articles/{id}/submit:
    post:
      summary: Submit article for approval
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Submitted

  /admin/articles/pending:
    get:
      summary: View pending articles
      security:
        - bearerAuth: []
      responses:
        200:
          description: List of pending articles

  /admin/articles/{id}/approve:
    post:
      summary: Approve article
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: integer
      responses:
        200:
          description: Approved

  /admin/articles/{id}/reject:
    post:
      summary: Reject article
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                reason:
                  type: string
      responses:
        200:
          description: Rejected

  /patient/articles:
    get:
      summary: View published articles
      parameters:
        - name: tag
          in: query
          schema:
            type: string
      responses:
        200:
          description: Published articles

  /patient/articles/{id}/report:
    post:
      summary: Report article abuse
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                notes:
                  type: string
      responses:
        201:
          description: Reported
